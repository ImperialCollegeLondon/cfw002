all:
	gcc test_cfwlib.c -O2 -o test_cfwlib -lcfw002           -I../API/ -L../API/
	gcc test_filter.c -O2 -o test_filter -lcfw002           -I../API/ -L../API/
	gcc test_audio.c -O2 -o test_audio -lcfw002             -I../API/ -L../API/
	gcc test_notblock.c -O2 -o test_notblock -lcfw002       -I../API/ -L../API/
	gcc test_id_filter.c -O2 -o test_id_filter -lcfw002     -I../API/ -L../API/

clean:
	rm -f test_cfwlib
	rm -f test_filter
	rm -f test_audio
	rm -f test_notblock
	rm -f test_id_filter

install: test_audio
	mkdir -p /lib/modules/$(KVER)/iCubDrivers/cfw002/LinuxDriver/tests/
	cp test_audio /lib/modules/$(KVER)/iCubDrivers/cfw002/LinuxDriver/

uninstall:
	-rm -f /lib/firmware/$(FIRMWARE_TARGET)/LinuxDriver/tests
