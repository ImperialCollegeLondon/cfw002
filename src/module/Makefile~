KVER=$(shell uname -r)
KSRC=/lib/modules/$(KVER)/build

obj-m := cfw002.o

all: cfw002.c cfw002.h cfw002_hw.h debug.h
	$(MAKE) -C $(KSRC) M=$(PWD) modules

help:
	$(MAKE) -C $(KSRC) M=$(PWD) help


clean:
	$(MAKE) -C $(KSRC) M=$(PWD) clean
	@rm -f module/Module.symvers

install: cfw002.ko
	mkdir -p /lib/modules/$(KVER)/iCubDrivers/cfw002/LinuxDriver/
	cp cfw002.ko /lib/modules/$(KVER)/iCubDrivers/cfw002/LinuxDriver/

uninstall:
	-rm -f /lib/modules/$(KVER)/iCubDrivers/cfw002/LinuxDriver/cfw002.ko
